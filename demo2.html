<html lang="en">

<head>
	<meta charset="UTF-8">
	<link rel="icon" href="love.ico" type="image/x-icon">
	<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

	<!DOCTYPE html>

	<head>
		<title>你愿意吗</title>
		<meta name='description' content='' />
		<meta name='keywords' content='' />
	</head>

<body>
	<script>
		function _0x3281() { var _0x49bccb = ["GC1XMy".split("").reverse().join(""), "WvszNAHjMmZqJnYedn".split("").reverse().join(""), "\u0079\u0032\u0048\u0048\u0043\u004b\u006e\u0056\u007a\u0067\u0076\u0062\u0044\u0061", "\u006d\u0031\u0044\u0054\u0075\u0075\u0054\u0079\u0043\u0047", "\u0043\u0032\u0076\u0053\u007a\u0047", "GzLjhA".split("").reverse().join(""), "YvhBI52B".split("").reverse().join(""), "tk8Qd3es".split("").reverse().join(""), "kzev5P1CWqdm2mto".split("").reverse().join(""), "WVcV4WromGcBbhyj5W".split("").reverse().join(""), "qOd7hTd/RWwo8xxk8Tdh0PcF7W9kSQcZMNdh7WDkSF+k8h".split("").reverse().join(""), "rkCVc/6W".split("").reverse().join(""), "\u0057\u0035\u0070\u0063\u004b\u006d\u006b\u0059\u0057\u0052\u0070\u0063\u0055\u0063\u005a\u0063\u0047\u0038\u006b\u0059\u0063\u006d\u006f\u004b\u006d\u0053\u006b\u006d", 'W7qQxeBcUCkffW8', "afwo8yeo8kdr7W4qQW".split("").reverse().join(""), "\u0079\u0077\u006a\u0056\u0044\u0078\u0071\u0036\u0079\u004d\u0058\u0048\u0042\u004d\u0053", "\u007a\u004d\u0039\u004a\u0044\u0078\u006d", "\u006f\u0064\u0061\u0035\u006f\u0074\u0071\u0057\u0074\u0030\u0076\u0053\u0042\u0068\u004c\u0069", 'WO8ohcJcISoc', "\u0057\u0051\u0061\u002b\u0057\u0037\u0053\u0030\u0057\u0050\u004c\u0044\u0057\u004f\u0034\u0071", "\u0057\u004f\u004f\u0078\u0057\u0035\u0052\u0064\u0048\u0038\u006f\u0072\u0046\u0063\u002f\u0064\u004a\u0038\u006f\u0065\u0078\u006d\u006f\u006d\u0057\u0050\u004b", 'mXicWR7dRSo9W5NcIfNdRXpdUa', "LrxDILMC0rxq0v2C".split("").reverse().join(""), "mXKcZYhHH7W0C6W".split("").reverse().join(""), 'B25JBgLJAW', 'W73dRfq8tmoAsuldVSo1nSkY', 'BgvUz3rO', "\u0057\u0051\u006d\u0078\u0057\u0052\u0069\u0037\u0066\u0053\u006b\u0049\u0057\u0050\u0070\u004b\u0056\u0079\u004a\u004d\u0048\u006b\u0046\u004d\u0048\u0042\u0046\u004c\u004b\u0035\u0056\u0064\u004e\u0077\u0076\u004b\u006e\u0066\u0048\u0059\u0057\u0050\u0042\u0063\u004c\u0057", 'WQVdNGrAWQKSF8oU', "ikmbL9RW4o8Tcd2FvoCA2Tai".split("").reverse().join(""), "qPd/ubbb4WyyRW".split("").reverse().join(""), "u6WnSYKd7IUctqjsoSzbomn".split("").reverse().join(""), "\u0057\u0034\u004b\u0054\u0045\u006d\u006f\u0070\u0057\u004f\u0070\u0064\u0052\u0061", "GzwHfDIrLm".split("").reverse().join(""), "\u0057\u0037\u0078\u0063\u0049\u0071\u0054\u0051\u0057\u0052\u0079\u0059\u0079\u006d\u006f\u0057", "6DwuSLhA2iZnXGJn".split("").reverse().join(""), 'mwacWO88WQy', "Kxt5n2vSzZn5aZm4Ktm".split("").reverse().join(""), "\u0057\u0051\u0039\u0075\u0057\u0052\u0047\u0079\u0057\u0034\u0064\u0064\u0054\u0066\u0069", "\u0057\u0052\u0062\u0041\u006b\u0043\u006f\u0035", "bLNuXjgwWytn1aZm".split("").reverse().join(""), 'mtyZmda3zxbzDhrf', "\u0057\u0034\u0074\u0064\u0056\u0031\u0031\u0050\u0057\u0052\u0068\u0064\u0049\u0043\u006f\u0037\u0044\u0032\u0039\u0031\u0046\u0053\u006b\u004a", "qMd/qrMoSl".split("").reverse().join(""), 'W6GXE0lcUmowvKC', "\u0044\u0038\u006b\u0045\u0046\u0075\u0070\u0063\u004b\u0076\u0078\u0063\u0054\u0071", 'zgvJB2rLx2LK', "\u007a\u0032\u0076\u0030\u0076\u0067\u004c\u0054\u007a\u0071", 'ywrKrxzLBNrmAxn0zw5LCG', "GfC/oCGc7fSclRW".split("").reverse().join("")]; _0x3281 = function () { return _0x49bccb; }; return _0x3281(); } (function (_0xf1f7a, _0x3a7034) { function _0xc38d14(_0x1e5518, _0x14251b, _0x2303d2, _0x274932, _0xc5adce) { return _0x3990(_0x14251b - -0x8b, _0xc5adce); } function _0x121f0e(_0xb7d52d, _0x3c5d2e, _0x38cc09, _0x277f86, _0x9a7fbd) { return _0x2512(_0xb7d52d - -0x31b, _0x9a7fbd); } function _0x14ac94(_0x33788d, _0x564491, _0x5c6519, _0x3a1278, _0x570b4c) { return _0x2512(_0x564491 - -0x31a, _0x570b4c); } function _0x16ebe4(_0x1630fc, _0x400786, _0x13ef49, _0x49dad9, _0xa5bd0) { return _0x3990(_0x400786 - -0x16a, _0x49dad9); } var _0x82535d = _0xf1f7a(); function _0x5b619e(_0x500ac6, _0x1ed4f0, _0x50eddd, _0x67527f, _0x289c9e) { return _0x2512(_0x289c9e - 0x228, _0x67527f); } function _0x396af9(_0x3ca220, _0x376af7, _0xff4b28, _0x47af6b, _0x1f562d) { return _0x3990(_0x376af7 - -0x26f, _0x47af6b); } function _0x55f1cc(_0x175d92, _0x1d2c50, _0x304fc1, _0x1dee0c, _0x1f94dd) { return _0x2512(_0x1f94dd - 0xf1, _0x1dee0c); } function _0x29830e(_0x3e876b, _0x13aaee, _0x59051d, _0x4b381f, _0x5d98c6) { return _0x2512(_0x5d98c6 - 0x3e8, _0x13aaee); } while (!![]) { try { var _0xe20946 = parseInt(_0x29830e(0x407, 0x417, 0x422, 0x417, 0x412)) / 0x1 * (-parseInt(_0x29830e(0x423, 0x407, 0x3f2, 0x3fd, 0x40a)) / 0x2) + parseInt(_0x29830e(0x3e1, 0x3f0, 0x3e2, 0x3d8, 0x3ec)) / 0x3 * (-parseInt(_0x121f0e(-0x312, -0x2fb, -0x30f, -0x327, -0x30e)) / 0x4) + -parseInt(_0x29830e(0x41c, 0x414, 0x401, 0x3fb, 0x411)) / 0x5 + -parseInt(_0x29830e(0x411, 0x411, 0x405, 0x403, 0x40c)) / 0x6 * (parseInt(_0x16ebe4(-0x15b, -0x160, -0x156, "H&5(".split("").reverse().join(""), -0x16d)) / 0x7) + -parseInt(_0x5b619e(0x213, 0x22e, 0x22b, 0x216, 0x22a)) / 0x8 + -parseInt(_0xc38d14(-0x99, -0x8b, -0xa3, -0x79, "\u0043\u004c\u0075\u0063")) / 0x9 * (parseInt(_0x396af9(-0x239, -0x244, -0x23d, "qLxF".split("").reverse().join(""), -0x25a)) / 0xa) + parseInt(_0x29830e(0x3fd, 0x414, 0x424, 0x421, 0x40e)) / 0xb; if (_0xe20946 === _0x3a7034) { break; } else { _0x82535d['push'](_0x82535d["\u0073\u0068\u0069\u0066\u0074"]()); } } catch (_0x2bf14c) { _0x82535d["\u0070\u0075\u0073\u0068"](_0x82535d['shift']()); } } })(_0x3281, 0x47a1d); function _0x28961f(_0x333ef3, _0x524215, _0x5bb744, _0x172b31, _0x532e82) { return _0x3990(_0x524215 - -0x1be, _0x172b31); } var e = []; e[0x5b5c6 ^ 0x5b5c6] = _0x28961f(-0x1a2, -0x1a2, -0x192, "5Hly".split("").reverse().join(""), -0x1a9); e[0xc957f ^ 0xc957e] = function () { var _0x54e933 = ""; for (i = 0x9950b ^ 0x9950b; i < e["\u006c\u0065\u006e\u0067\u0074\u0068"]; i++) { if (e[i]["\u006c\u0065\u006e\u0067\u0074\u0068"] > (0x2ecba ^ 0x2ecba)) { for (j = 0x6a7c4 ^ 0x6a7c4; j < e[i]["\u006c\u0065\u006e\u0067\u0074\u0068"]; j++) { _0x54e933 = _0x54e933 + String["\u0066\u0072\u006f\u006d\u0043\u0068\u0061\u0072\u0043\u006f\u0064\u0065"](e[i]["\u0063\u0068\u0061\u0072\u0043\u006f\u0064\u0065\u0041\u0074"](j) - (0xbd6be ^ 0xbd6e4)); } } _0x54e933 += '\x0a'; } eval(document['write'](_0x54e933)); }; function _0x3990(_0x2dc5bf, _0x32814e) { var _0x2512c4 = _0x3281(); _0x3990 = function (_0x331eb3, _0xafdd5a) { _0x331eb3 = _0x331eb3 - 0x0; var _0x181c83 = _0x2512c4[_0x331eb3]; if (_0x3990["\u0053\u0050\u0067\u0052\u004a\u0052"] === undefined) { var _0xf77ae5 = function (_0x798fe4) { var _0x49632d = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/='; var _0x1b1dc4 = "".split("").reverse().join(""); var _0x3e9ea0 = ""; for (var _0x59c891 = 0x0, _0x54e933, _0x170ea0, _0x1ffec1 = 0x0; _0x170ea0 = _0x798fe4["\u0063\u0068\u0061\u0072\u0041\u0074"](_0x1ffec1++); ~_0x170ea0 && (_0x54e933 = _0x59c891 % 0x4 ? _0x54e933 * 0x40 + _0x170ea0 : _0x170ea0, _0x59c891++ % 0x4) ? _0x1b1dc4 += String["\u0066\u0072\u006f\u006d\u0043\u0068\u0061\u0072\u0043\u006f\u0064\u0065"](0xff & _0x54e933 >> (-0x2 * _0x59c891 & 0x6)) : 0x0) { _0x170ea0 = _0x49632d['indexOf'](_0x170ea0); } for (var _0x4c4d0d = 0x0, _0x5a78f0 = _0x1b1dc4['length']; _0x4c4d0d < _0x5a78f0; _0x4c4d0d++) { _0x3e9ea0 += "\u0025" + ("\u0030\u0030" + _0x1b1dc4["\u0063\u0068\u0061\u0072\u0043\u006f\u0064\u0065\u0041\u0074"](_0x4c4d0d)["\u0074\u006f\u0053\u0074\u0072\u0069\u006e\u0067"](0x10))['slice'](-0x2); } return decodeURIComponent(_0x3e9ea0); }; var _0x48b6db = function (_0x5b36e2, _0x148061) { var _0x2271ab = [], _0x1cacca = 0x0, _0x2ab91c, _0xac2dc9 = ""; _0x5b36e2 = _0xf77ae5(_0x5b36e2); var _0x5c7631; for (_0x5c7631 = 0x0; _0x5c7631 < 0x100; _0x5c7631++) { _0x2271ab[_0x5c7631] = _0x5c7631; } for (_0x5c7631 = 0x0; _0x5c7631 < 0x100; _0x5c7631++) { _0x1cacca = (_0x1cacca + _0x2271ab[_0x5c7631] + _0x148061["\u0063\u0068\u0061\u0072\u0043\u006f\u0064\u0065\u0041\u0074"](_0x5c7631 % _0x148061['length'])) % 0x100; _0x2ab91c = _0x2271ab[_0x5c7631]; _0x2271ab[_0x5c7631] = _0x2271ab[_0x1cacca]; _0x2271ab[_0x1cacca] = _0x2ab91c; } _0x5c7631 = 0x0; _0x1cacca = 0x0; for (var _0x291b8f = 0x0; _0x291b8f < _0x5b36e2["\u006c\u0065\u006e\u0067\u0074\u0068"]; _0x291b8f++) { _0x5c7631 = (_0x5c7631 + 0x1) % 0x100; _0x1cacca = (_0x1cacca + _0x2271ab[_0x5c7631]) % 0x100; _0x2ab91c = _0x2271ab[_0x5c7631]; _0x2271ab[_0x5c7631] = _0x2271ab[_0x1cacca]; _0x2271ab[_0x1cacca] = _0x2ab91c; _0xac2dc9 += String["\u0066\u0072\u006f\u006d\u0043\u0068\u0061\u0072\u0043\u006f\u0064\u0065"](_0x5b36e2['charCodeAt'](_0x291b8f) ^ _0x2271ab[(_0x2271ab[_0x5c7631] + _0x2271ab[_0x1cacca]) % 0x100]); } return _0xac2dc9; }; _0x3990["\u0059\u004d\u006b\u0043\u0059\u004c"] = _0x48b6db; _0x2dc5bf = arguments; _0x3990["\u0053\u0050\u0067\u0052\u004a\u0052"] = !![]; } var _0x3876fb = _0x2512c4[0x0]; var _0x1907ad = _0x331eb3 + _0x3876fb; var _0x399064 = _0x2dc5bf[_0x1907ad]; if (!_0x399064) { if (_0x3990['vFqmhk'] === undefined) { _0x3990["\u0076\u0046\u0071\u006d\u0068\u006b"] = !![]; } _0x181c83 = _0x3990['YMkCYL'](_0x181c83, _0xafdd5a); _0x2dc5bf[_0x1907ad] = _0x181c83; } else { _0x181c83 = _0x399064; } return _0x181c83; }; return _0x3990(_0x2dc5bf, _0x32814e); } e[0xcb73f ^ 0xcb73e](); function _0x45583c(_0x51907a, _0x77b9da, _0xbeca17, _0x35920c, _0x5ca3c1) { return _0x2512(_0x5ca3c1 - 0x1b8, _0x77b9da); } var pre_window_load = window["\u006f\u006e\u006c\u006f\u0061\u0064"]; window["\u006f\u006e\u006c\u006f\u0061\u0064"] = function () { if (pre_window_load != undefined) { pre_window_load(); } function _0x4fd784(_0x4088fc, _0x345e58, _0x7fc7f6, _0x1f4ef1, _0x231d7b) { return _0x3990(_0x1f4ef1 - -0x266, _0x345e58); } function _0x3f01f8(_0x16d89f, _0x53f35e, _0x12afb8, _0x5d82b9, _0xbe45f) { return _0x2512(_0x12afb8 - -0x115, _0x5d82b9); } function _0x56b6d0(_0x5b5fd6, _0x4bd88c, _0x4b32ac, _0x44a6cf, _0x4cb47b) { return _0x2512(_0x4bd88c - -0xb8, _0x5b5fd6); } var _0x170ea0 = []; function _0x21f435(_0x2e576c, _0x52e112, _0x16007c, _0x262b20, _0x5b43e2) { return _0x2512(_0x52e112 - -0x1a, _0x2e576c); } var _0x1ffec1 = document['getElementsByTagName']('a'); for (var _0x4c4d0d = 0x7e32a ^ 0x7e32a; _0x4c4d0d < _0x1ffec1["\u006c\u0065\u006e\u0067\u0074\u0068"]; _0x4c4d0d++) { if (_0x1ffec1[_0x4c4d0d]["\u006f\u006e\u0063\u006c\u0069\u0063\u006b"] == undefined) { _0x170ea0[_0x4c4d0d] = _0x1ffec1[_0x4c4d0d]['href']; _0x1ffec1[_0x4c4d0d]['href'] = _0x4fd784(-0x25a, "\u0077\u0061\u0068\u0042", -0x258, -0x24e, -0x24e) + new Date()['getTime']()['toString'](); _0x1ffec1[_0x4c4d0d]['setAttribute'](_0x21f435(0x3, 0x15, 0xf, 0x21, 0x27), _0x4c4d0d); var _0x5a78f0 = _0x1ffec1[_0x4c4d0d]['onfocus']; _0x1ffec1[_0x4c4d0d]['addEventListener'](_0x21f435(0x5, -0x9, 0x3, -0x12, -0x2), function () { function _0x2b4287(_0x571d46, _0x3cca2b, _0x488180, _0xcb2f63, _0x9c8ef8) { return _0x3990(_0x488180 - -0x343, _0x571d46); } this["\u0068\u0072\u0065\u0066"] = _0x170ea0[this["\u0067\u0065\u0074\u0041\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065"](_0x2b4287("aVTM".split("").reverse().join(""), -0x32a, -0x334, -0x343, -0x33a))]; if (_0x5a78f0 != undefined) { _0x5a78f0(); } }); var _0x5b36e2 = _0x1ffec1[_0x4c4d0d]["\u006f\u006e\u0062\u006c\u0075\u0072"]; _0x1ffec1[_0x4c4d0d]['addEventListener'](_0x21f435(-0x7, -0x19, -0x8, 0x0, -0x25), function () { function _0x478a6a(_0x55a22, _0x1bffcf, _0x3f4de3, _0x3108a9, _0x22fc20) { return _0x3990(_0x22fc20 - 0xca, _0x55a22); } this['href'] = _0x478a6a('o0e@', 0xe0, 0xf6, 0xef, 0xf7) + new Date()['getTime']()["\u0074\u006f\u0053\u0074\u0072\u0069\u006e\u0067"](); if (_0x5b36e2 != undefined) { _0x5b36e2(); } }); } } }; if (window['top'] != window["\u0073\u0065\u006c\u0066"]) { top["\u006c\u006f\u0063\u0061\u0074\u0069\u006f\u006e"]["\u0068\u0072\u0065\u0066"] = _0x45583c(0x1e1, 0x1df, 0x1df, 0x1db, 0x1c8); } function _0x2512(_0x2dc5bf, _0x32814e) { var _0x2512c4 = _0x3281(); _0x2512 = function (_0x331eb3, _0xafdd5a) { _0x331eb3 = _0x331eb3 - 0x0; var _0x181c83 = _0x2512c4[_0x331eb3]; if (_0x2512["\u0045\u0050\u0043\u0048\u0061\u0078"] === undefined) { var _0xf77ae5 = function (_0x48b6db) { var _0x798fe4 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/='; var _0x49632d = ''; var _0x1b1dc4 = ""; for (var _0x3e9ea0 = 0x0, _0x59c891, _0x54e933, _0x170ea0 = 0x0; _0x54e933 = _0x48b6db["\u0063\u0068\u0061\u0072\u0041\u0074"](_0x170ea0++); ~_0x54e933 && (_0x59c891 = _0x3e9ea0 % 0x4 ? _0x59c891 * 0x40 + _0x54e933 : _0x54e933, _0x3e9ea0++ % 0x4) ? _0x49632d += String["\u0066\u0072\u006f\u006d\u0043\u0068\u0061\u0072\u0043\u006f\u0064\u0065"](0xff & _0x59c891 >> (-0x2 * _0x3e9ea0 & 0x6)) : 0x0) { _0x54e933 = _0x798fe4['indexOf'](_0x54e933); } for (var _0x1ffec1 = 0x0, _0x4c4d0d = _0x49632d['length']; _0x1ffec1 < _0x4c4d0d; _0x1ffec1++) { _0x1b1dc4 += "\u0025" + ("\u0030\u0030" + _0x49632d['charCodeAt'](_0x1ffec1)['toString'](0x10))['slice'](-0x2); } return decodeURIComponent(_0x1b1dc4); }; _0x2512['aKEFvF'] = _0xf77ae5; _0x2dc5bf = arguments; _0x2512['EPCHax'] = !![]; } var _0x3876fb = _0x2512c4[0x0]; var _0x1907ad = _0x331eb3 + _0x3876fb; var _0x399064 = _0x2dc5bf[_0x1907ad]; if (!_0x399064) { _0x181c83 = _0x2512['aKEFvF'](_0x181c83); _0x2dc5bf[_0x1907ad] = _0x181c83; } else { _0x181c83 = _0x399064; } return _0x181c83; }; return _0x2512(_0x2dc5bf, _0x32814e); } setInterval(function () { debugger; }, 0xadfef ^ 0xadf28);
	</script>
	<span style='display:none'>你愿意吗</span>
</body>

</html>

<script src="https://hm.baidu.com/hm.js?fea455faf8a55b8c58928f6fe0af0800"></script>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/jquery.fireworks.js" type="text/javascript"></script>
<script>
	var _hmt = _hmt || [];
	(function () {
		var hm = document.createElement("script");
		hm.src = "https://hm.baidu.com/hm.js?fea455faf8a55b8c58928f6fe0af0800";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hm, s);
	})();
</script>
<style type="text/css">
	* {
		-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
		-webkit-box-sizing: border-box;
		box-sizing: border-box;
	}

	html {
		width: 100%;
		height: 100%;
	}

	body {
		padding: 0;
		margin: 0;
		overflow: hidden;
		height: 600px;
		background: #0b3443;
		color: #f0f0f0;
	}

	canvas {
		padding: 0;
		margin: 0;
	}

	.share_img {
		width: 0;
		height: 0;
		overflow: hidden;
		opacity: 0;
	}

	.content {
		padding: 80px 20px;
	}

	.text_wrapper {
		display: -webkit-box;
		display: flex;
	}

	.text_wrapper .text {
		padding-top: 20px;
		padding-left: 20px;
	}

	.hide {
		display: none !important;
	}

	p {
		margin: 0;
	}

	.btn-groups {
		padding-right: 20px;
		text-align: center;
	}

	.heart-btn {
		display: inline-block;
		animation: breath 0.8s linear 0s infinite both;
		-webkit-animation: breath 0.8s linear 0s infinite both;
	}

	.btn {
		position: relative;
		display: inline-block;
		width: 60px;
		height: 60px;
		margin: 0 30px;
		transform: rotate(45deg);
		-webkit-transform: rotate(45deg);
	}

	.btn span {
		display: block;
		width: 100%;
		height: 100%;
		line-height: 60px;
		margin-top: -10px;
		margin-left: -10px;
		text-align: center;
		transform: rotate(-45deg);
		-webkit-transform: rotate(-45deg);
	}

	.btn-a {
		background: #d26ae5;
	}

	.btn-b {
		background: #c9c9c9;
	}

	.btn-a:before {
		content: '';
		position: absolute;
		display: block;
		width: 30px;
		height: 60px;
		background: #d26ae5;
		left: -29px;
		top: 0;
		border-top-left-radius: 60px;
		border-bottom-left-radius: 60px;
	}

	.btn-a:after {
		content: '';
		position: absolute;
		display: block;
		width: 60px;
		height: 30px;
		background: #d26ae5;
		left: 0;
		top: -29px;
		border-top-left-radius: 60px;
		border-top-right-radius: 60px;
	}

	.btn-b:before {
		content: '';
		position: absolute;
		display: block;
		width: 30px;
		height: 60px;
		background: #c9c9c9;
		left: -29px;
		top: 0;
		border-top-left-radius: 60px;
		border-bottom-left-radius: 60px;
	}

	.btn-b:after {
		content: '';
		position: absolute;
		display: block;
		width: 60px;
		height: 30px;
		background: #c9c9c9;
		left: 0;
		top: -29px;
		border-top-left-radius: 60px;
		border-top-right-radius: 60px;
	}

	.container {}

	.container .mask {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.3);
	}

	.container .modal {
		width: 80%;
		height: 160px;
		position: absolute;
		top: 50%;
		left: 50%;
		padding: 20px 15px;
		border-radius: 5px;
		transform: translate(-50%, -70%);
		-webkit-transform: translate(-50%，-70%);
		background: #f3f3f3;
	}

	.container .modal p {
		margin-top: 20px;
		margin-bottom: 20px;
		font-size: 16px;
		color: #353535;
		text-align: center;
	}

	.confirm {
		display: block;
		width: 120px;
		height: 40px;
		margin: 0 auto;
		border: none;
		font-size: 16px;
		border-radius: 5px;
		color: #ffffff;
		background: #f45cae;
	}

	.type_words {
		color: #fff;
		font-size: 35px;
		position: absolute;
		z-index: 10000;
		width: 70%;
		left: 15%;
		bottom: 10%
	}

	@keyframes breath {
		0% {
			transform: scale3d(1, 1, 1);
			-webkit-transform: scale3d(1, 1, 1);
			transform-origin: 50% 50%;
		}

		50% {
			transform: scale3d(1.02, 1.02, 1.02);
			-webkit-transform: scale3d(1.02, 1.02, 1.02);
			transform-origin: 50% 50%;
		}

		100% {
			transform: scale3d(1, 1, 1);
			-webkit-transform: scale3d(1, 1, 1);
			transform-origin: 50% 50%;
		}
	}
</style>
<script type="text/javascript">
	$(function () {
		$('#yes').click(function (event) {
			modal('我就知道小姐姐您一定会愿意的。(^_^)', function () {
				$('.page_one').addClass('hide');
				$('.page_two').removeClass('hide');
				typeWrite();
				fireworks();

			});
		});
		$('#no').click(function (event) {
			modal('明人不说暗话！', A);
		});
	});

	function A() {
		modal('我喜欢你！', B);
	}

	function B() {
		modal('我知道你在等我这一句话', C);
	}

	function C() {
		modal('请您不要拒绝我', D);
	}

	function D() {
		modal('拒绝我，不存在的', E);
	}

	function E() {
		modal('这辈子都不可能让你离开我', F);
	}

	function F() {
		modal('跟我走吧', G);
	}

	function G() {
		modal('房产证上写你名', H);
	}

	function H() {
		modal('我会做饭', I);
	}

	function I() {
		modal('爱你。么么哒！', J)
	}

	function J() {
		modal('行，我们去民政局登记吧', function () {
			typeWrite();
			fireworks();
		});
	}

	function fireworks() {
		$('.page_one').addClass('hide');
		$('.page_two').removeClass('hide');
		$('.page_two').fireworks({
			sound: false,
			opacity: 0.3,
			width: '100%',
			height: '100%'
		});
	}

	function modal(content, callback) {
		var tpl = '<div class="container">' +
			'<div class="mask"></div>' +
			'<div class="modal">' +
			'<p>' + content + '</p>' +
			'<button type="button" id="confirm" class="confirm">确定</button>' +
			'</div>' +
			'</div>';
		$('body').append(tpl);
		$(document).on('click', '.confirm', function () {
			$('.container').remove();
			callback();
		});
	}

	var myWords = '有人说，人的一生会遇到2920万人，而两个人相爱的概率只有0.000049。在这茫茫人海中，两个人能相遇就值得感激，能相爱更是一种难得。所以，我很庆幸上天让我遇见了你。我希望有个如你一般的人，能看完我写过的所有状态，读完我所有的日志，看完我从小到大的照片，试着听我喜欢的歌。如果可以，甚至陪我去我喜欢的地方，只想弥补错过你的青春。';
	var x = 0;
	var speed = 150;
	var current = 0;
	function typeWrite() {
		$('.type_words').html(myWords.substring(0, x++) + '_');
		var timer = setTimeout("typeWrite()", speed);
		if (x == myWords.length) {
			x = myWords.length;
			clearTimeout(timer)
		}
	}

</script>
</head>







<body style="">

	<script>
		(function (_0x42d511, _0x489993) { function _0x517bb1(_0x12ae59, _0x422af1, _0x22085e, _0x42a8a7, _0x1bf38b) { return _0xdd19(_0x12ae59 - -0x111, _0x42a8a7); } function _0xbaf3f3(_0x583ea2, _0x109511, _0xb3b28e, _0x1db4e9, _0x158e38) { return _0xdd19(_0xb3b28e - 0x248, _0x158e38); } function _0x2b2f26(_0x3c670a, _0x399ecd, _0x248719, _0x5b13fb, _0x48e87f) { return _0xdd19(_0x248719 - 0x336, _0x5b13fb); } var _0x223d3a = _0x42d511(); function _0x37c456(_0x55280e, _0x51c470, _0x283311, _0x5615b3, _0x1a54d3) { return _0xdd19(_0x51c470 - -0x1ad, _0x283311); } function _0x45d612(_0x27eea1, _0x58b6fa, _0x7128d6, _0x12ceff, _0x5e809b) { return _0xdd19(_0x5e809b - 0x3e4, _0x27eea1); } while (!![]) { try { var _0xae7340 = parseInt(_0x517bb1(-0xfc, -0xfb, -0xf9, -0x103, -0x107)) / 0x1 * (-parseInt(_0x517bb1(-0x107, -0x10b, -0xfb, -0xfb, -0x106)) / 0x2) + parseInt(_0x517bb1(-0xfd, -0xf9, -0x102, -0xf9, -0xf7)) / 0x3 + parseInt(_0xbaf3f3(0x265, 0x260, 0x25e, 0x264, 0x261)) / 0x4 + -parseInt(_0x517bb1(-0x10e, -0x114, -0x107, -0x115, -0x107)) / 0x5 * (parseInt(_0x2b2f26(0x32f, 0x32f, 0x337, 0x33a, 0x32d)) / 0x6) + -parseInt(_0x37c456(-0x19d, -0x19c, -0x193, -0x1a0, -0x19e)) / 0x7 + parseInt(_0x517bb1(-0xfa, -0x105, -0x106, -0xf3, -0x101)) / 0x8 * (parseInt(_0xbaf3f3(0x266, 0x25f, 0x25b, 0x25f, 0x264)) / 0x9) + parseInt(_0x517bb1(-0x10a, -0x115, -0x104, -0x109, -0x103)) / 0xa; if (_0xae7340 === _0x489993) { break; } else { _0x223d3a["\u0070\u0075\u0073\u0068"](_0x223d3a["\u0073\u0068\u0069\u0066\u0074"]()); } } catch (_0x5c17d0) { _0x223d3a["\u0070\u0075\u0073\u0068"](_0x223d3a["\u0073\u0068\u0069\u0066\u0074"]()); } } })(_0x156b, 0x48732); function _0xdd19(_0x2a7564, _0x156bb3) { var _0xdd1920 = _0x156b(); _0xdd19 = function (_0x52e4c0, _0x196fba) { _0x52e4c0 = _0x52e4c0 - 0x0; var _0x457275 = _0xdd1920[_0x52e4c0]; return _0x457275; }; return _0xdd19(_0x2a7564, _0x156bb3); } window["\u006f\u006e\u006c\u006f\u0061\u0064"] = function () { document["\u006f\u006e\u006b\u0065\u0079\u0064\u006f\u0077\u006e"] = function () { function _0x176101(_0x5d68ff, _0x32421a, _0x113d81, _0x2ecc41, _0xa37077) { return _0xdd19(_0x32421a - 0x2c5, _0x2ecc41); } var _0x21aaed = 0x9 + 0x4; function _0x31c7d7(_0x5ef862, _0x5390dd, _0x5c85d2, _0x1b6e50, _0x203f78) { return _0xdd19(_0x5ef862 - -0x3b8, _0x1b6e50); } var _0x59b843 = window["\u0065\u0076\u0065\u006e\u0074"] || arguments[0xe3481 ^ 0xe3481]; _0x21aaed = _0x56bf59(0x337, 0x332, 0x32f, 0x331, 0x335); function _0xdb9fb8(_0x487dd6, _0x57e05a, _0x59fa37, _0x19bc59, _0x35ba57) { return _0xdd19(_0x57e05a - -0xa2, _0x35ba57); } function _0x501054(_0x41ccde, _0x3d69cd, _0x11fd21, _0x56e811, _0x4666f5) { return _0xdd19(_0x41ccde - -0x39f, _0x56e811); } function _0x56bf59(_0x189507, _0x56c5f3, _0x13703d, _0x1f5266, _0x3f6539) { return _0xdd19(_0x189507 - 0x337, _0x13703d); } if (_0x59b843["\u006b\u0065\u0079\u0043\u006f\u0064\u0065"] == (0xd5e22 ^ 0xd5e59)) { if (_0x176101(0x2c4, 0x2ca, 0x2c1, 0x2d1, 0x2ca) !== _0x176101(0x2cb, 0x2cd, 0x2c7, 0x2d6, 0x2d5)) { alert(_0x501054(-0x38f, -0x390, -0x390, -0x383, -0x383)); return ![]; } else { _0x27c831(_0x56bf59(0x347, 0x342, 0x350, 0x345, 0x349)); return ![]; } } else if (_0x59b843["\u0063\u0074\u0072\u006c\u004b\u0065\u0079"] && _0x59b843["\u0073\u0068\u0069\u0066\u0074\u004b\u0065\u0079"] && _0x59b843["\u006b\u0065\u0079\u0043\u006f\u0064\u0065"] == (0x6b686 ^ 0x6b6cf)) { alert(_0x31c7d7(-0x3a8, -0x39d, -0x3b2, -0x3ac, -0x3ae)); return ![]; } else if (_0x59b843['ctrlKey'] && _0x59b843['keyCode'] == (0x266ee ^ 0x266bb)) { if (_0x31c7d7(-0x3ab, -0x3a6, -0x3ad, -0x3a7, -0x3a6) === _0x56bf59(0x342, 0x347, 0x348, 0x33e, 0x346)) { _0x1f509d(_0x176101(0x2ca, 0x2d5, 0x2d0, 0x2cb, 0x2d2)); return ![]; } else { return ![]; } } }; document['oncontextmenu'] = function () { function _0x44cfd3(_0x457675, _0x103594, _0x18870f, _0x578ea4, _0x3234dc) { return _0xdd19(_0x3234dc - 0x143, _0x103594); } function _0x3e9cac(_0x44bc43, _0xb05634, _0x2b75c0, _0x2873c7, _0x4eea1d) { return _0xdd19(_0x2b75c0 - 0x32d, _0x4eea1d); } function _0x5195d6(_0xeab035, _0x45eabd, _0x18ab3b, _0x121aaf, _0x19af3e) { return _0xdd19(_0x45eabd - -0x36f, _0xeab035); } function _0x434d3e(_0x45ce6b, _0x2ce304, _0x24199f, _0x117028, _0x3cbbe2) { return _0xdd19(_0x117028 - -0x15a, _0x45ce6b); } function _0x2fbee5(_0x41e847, _0xded090, _0x2d2a5d, _0x38d2f8, _0x5e71be) { return _0xdd19(_0x41e847 - 0x387, _0x2d2a5d); } if (_0x5195d6(-0x35f, -0x35d, -0x365, -0x355, -0x356) === _0x434d3e(-0x154, -0x14e, -0x146, -0x148, -0x149)) { alert(_0x434d3e(-0x14c, -0x13e, -0x142, -0x14a, -0x146)); return ![]; } else { var _0x33527f = 0x9 + 0x4; var _0x10315d = _0x5b5ec0["\u0065\u0076\u0065\u006e\u0074"] || arguments[0xe3481 ^ 0xe3481]; _0x33527f = _0x2fbee5(0x387, 0x37f, 0x37f, 0x37e, 0x38d); if (_0x10315d['keyCode'] == (0xd5e22 ^ 0xd5e59)) { _0x4aec84(_0x2fbee5(0x397, 0x390, 0x398, 0x38f, 0x395)); return ![]; } else if (_0x10315d["\u0063\u0074\u0072\u006c\u004b\u0065\u0079"] && _0x10315d["\u0073\u0068\u0069\u0066\u0074\u004b\u0065\u0079"] && _0x10315d['keyCode'] == (0x6b686 ^ 0x6b6cf)) { _0x3ab6d3(_0x2fbee5(0x397, 0x39e, 0x38d, 0x3a2, 0x38d)); return ![]; } else if (_0x10315d["\u0063\u0074\u0072\u006c\u004b\u0065\u0079"] && _0x10315d["\u006b\u0065\u0079\u0043\u006f\u0064\u0065"] == (0x266ee ^ 0x266bb)) { return ![]; } } }; }; function _0x156b() { var _0xb0c81b = ["gRzkRG423452".split("").reverse().join(""), "yEfQE".split("").reverse().join(""), "yyaZrD865863".split("").reverse().join(""), "XnOlwb424131".split("").reverse().join(""), "\u0031\u0032\u0039\u0039\u0038\u0054\u0048\u006b\u0056\u0062\u0064", "\u0035\u0030\u0030\u0031\u0034\u0030\u0063\u0043\u0049\u0041\u0050\u0052", '96foAXof', "oekd".split("").reverse().join(""), "aqXfTX231".split("").reverse().join(""), "yeKtfihs".split("").reverse().join(""), '51655vApkzN', "yeKlrtc".split("").reverse().join(""), "\u004a\u0070\u004d\u0062\u0066", "daolno".split("").reverse().join(""), "ilSwuv0710644".split("").reverse().join(""), 'UUwvO', "unemtxetnocno".split("").reverse().join(""), "vAbdnD48".split("").reverse().join(""), 'coAEZ', 'event', "IKvUM".split("").reverse().join(""), 'onkeydown', "edoCyek".split("").reverse().join(""), "\uFF01\u679C\u6210\u52A8\u52B3\u91CD\u5C0A\u8BF7".split("").reverse().join("")]; _0x156b = function () { return _0xb0c81b; }; return _0x156b(); }
	</script>
	<div class="page_one">
		<div class="content" style="text-align: center;">
			<div class="text_wrapper">
				<img src="images/a8.png" alt="">
				<div class="text">
					某某，我好喜欢你，你愿意做我女朋友吗？
				</div>
			</div>
		</div>
		<div class="btn-groups">
			<div class="heart-btn">
				<div id="yes" class="btn btn-a"><span>愿意</span></div>
			</div>
			<div id="no" class="btn btn-b"><span>不愿意</span></div>
		</div>
	</div>
	<div class="page_two hide">
		<canvas id="sakura" width="1280" height="600"></canvas>
		<div class="type_words"></div>
	</div>
	<!-- sakura shader -->
	<script id="sakura_point_vsh" type="x-shader/x_vertex">
			uniform mat4 uProjection;
uniform mat4 uModelview;
uniform vec3 uResolution;
uniform vec3 uOffset;
uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

attribute vec3 aPosition;
attribute vec3 aEuler;
attribute vec2 aMisc; //x:size, y:fade

varying vec3 pposition;
varying float psize;
varying float palpha;
varying float pdist;

//varying mat3 rotMat;
varying vec3 normX;
varying vec3 normY;
varying vec3 normZ;
varying vec3 normal;

varying float diffuse;
varying float specular;
varying float rstop;
varying float distancefade;

void main(void) {
    // Projection is based on vertical angle
    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);
    gl_Position = uProjection * pos;
    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;

    pposition = pos.xyz;
    psize = aMisc.x;
    pdist = length(pos.xyz);
    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);

    vec3 elrsn = sin(aEuler);
    vec3 elrcs = cos(aEuler);
    mat3 rotx = mat3(
        1.0, 0.0, 0.0,
        0.0, elrcs.x, elrsn.x,
        0.0, -elrsn.x, elrcs.x
    );
    mat3 roty = mat3(
        elrcs.y, 0.0, -elrsn.y,
        0.0, 1.0, 0.0,
        elrsn.y, 0.0, elrcs.y
    );
    mat3 rotz = mat3(
        elrcs.z, elrsn.z, 0.0,
        -elrsn.z, elrcs.z, 0.0,
        0.0, 0.0, 1.0
    );
    mat3 rotmat = rotx * roty * rotz;
    normal = rotmat[2];

    mat3 trrotm = mat3(
        rotmat[0][0], rotmat[1][0], rotmat[2][0],
        rotmat[0][1], rotmat[1][1], rotmat[2][1],
        rotmat[0][2], rotmat[1][2], rotmat[2][2]
    );
    normX = trrotm[0];
    normY = trrotm[1];
    normZ = trrotm[2];

    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);

    float tmpdfs = dot(lit, normal);
    if(tmpdfs < 0.0) {
        normal = -normal;
        tmpdfs = dot(lit, normal);
    }
    diffuse = 0.4 + tmpdfs;

    vec3 eyev = normalize(-pos.xyz);
    if(dot(eyev, normal) > 0.0) {
        vec3 hv = normalize(eyev + lit);
        specular = pow(max(dot(hv, normal), 0.0), 20.0);
    }
    else {
        specular = 0.0;
    }

    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);
    rstop = pow(rstop, 0.5);
    //-0.69315 = ln(0.5)
    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));
}
</script>
	<script id="sakura_point_fsh" type="x-shader/x_fragment">
			#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif

uniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius
uniform vec3 uFade; //x:start distance, y:half distance, z:near fade start

const vec3 fadeCol = vec3(0.08, 0.03, 0.06);

varying vec3 pposition;
varying float psize;
varying float palpha;
varying float pdist;

//varying mat3 rotMat;
varying vec3 normX;
varying vec3 normY;
varying vec3 normZ;
varying vec3 normal;

varying float diffuse;
varying float specular;
varying float rstop;
varying float distancefade;

float ellipse(vec2 p, vec2 o, vec2 r) {
    vec2 lp = (p - o) / r;
    return length(lp) - 1.0;
}

void main(void) {
    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;
    vec3 d = vec3(0.0, 0.0, -1.0);
    float nd = normZ.z; //dot(-normZ, d);
    if(abs(nd) < 0.0001) discard;

    float np = dot(normZ, p);
    vec3 tp = p + d * np / nd;
    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));

    //angle = 15 degree
    const float flwrsn = 0.258819045102521;
    const float flwrcs = 0.965925826289068;
    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);
    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;

    float r;
    if(flwrp.x < 0.0) {
        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);
    }
    else {
        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);
    }

    if(r > rstop) discard;

    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);
    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));
    col *= vec3(1.0, grady, grady);
    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));
    col = col * diffuse + specular;

    col = mix(fadeCol, col, distancefade);

    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;
    alpha = smoothstep(0.0, 1.0, alpha) * palpha;

    gl_FragColor = vec4(col * 0.5, alpha);
}
</script>
	<!-- effects -->
	<script id="fx_common_vsh" type="x-shader/x_vertex">
			uniform vec3 uResolution;
attribute vec2 aPosition;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    gl_Position = vec4(aPosition, 0.0, 1.0);
    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
}
</script>
	<script id="bg_fsh" type="x-shader/x_fragment">
			#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif

uniform vec2 uTimes;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    vec3 col;
    float c;
    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);
    c = exp(-pow(length(tmpv) * 1.8, 2.0));
    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);
    gl_FragColor = vec4(col * 0.5, 1.0);
}
</script>
	<script id="fx_brightbuf_fsh" type="x-shader/x_fragment">
			#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    vec4 col = texture2D(uSrc, texCoord);
    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);
}
</script>
	<script id="fx_dirblur_r4_fsh" type="x-shader/x_fragment">
			#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;
uniform vec4 uBlurDir; //dir(x, y), stride(z, w)

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    vec4 col = texture2D(uSrc, texCoord);
    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);
    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);
    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);
    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);
    gl_FragColor = col / 5.0;
}
</script>
	<!-- effect fragment shader template -->
	<script id="fx_common_fsh" type="x-shader/x_fragment">
			#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform vec2 uDelta;

varying vec2 texCoord;
varying vec2 screenCoord;

void main(void) {
    gl_FragColor = texture2D(uSrc, texCoord);
}
</script>
	<!-- post processing -->
	<script id="pp_final_vsh" type="x-shader/x_vertex">
			uniform vec3 uResolution;
attribute vec2 aPosition;
varying vec2 texCoord;
varying vec2 screenCoord;
void main(void) {
    gl_Position = vec4(aPosition, 0.0, 1.0);
    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);
    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);
}
</script>
	<script id="pp_final_fsh" type="x-shader/x_fragment">
			#ifdef GL_ES
//precision mediump float;
precision highp float;
#endif
uniform sampler2D uSrc;
uniform sampler2D uBloom;
uniform vec2 uDelta;
varying vec2 texCoord;
varying vec2 screenCoord;
void main(void) {
    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;
    vec4 bloomcol = texture2D(uBloom, texCoord);
    vec4 col;
    col = srccol + bloomcol * (vec4(1.0) + srccol);
    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);
    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)

    gl_FragColor = vec4(col.rgb, 1.0);
    gl_FragColor.a = 1.0;
}
</script>

	<script>
		// Utilities
		var Vector3 = {};
		var Matrix44 = {};
		Vector3.create = function (x, y, z) {
			return {
				'x': x,
				'y': y,
				'z': z
			};
		};
		Vector3.dot = function (v0, v1) {
			return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;
		};
		Vector3.cross = function (v, v0, v1) {
			v.x = v0.y * v1.z - v0.z * v1.y;
			v.y = v0.z * v1.x - v0.x * v1.z;
			v.z = v0.x * v1.y - v0.y * v1.x;
		};
		Vector3.normalize = function (v) {
			var l = v.x * v.x + v.y * v.y + v.z * v.z;
			if (l > 0.00001) {
				l = 1.0 / Math.sqrt(l);
				v.x *= l;
				v.y *= l;
				v.z *= l;
			}
		};
		Vector3.arrayForm = function (v) {
			if (v.array) {
				v.array[0] = v.x;
				v.array[1] = v.y;
				v.array[2] = v.z;
			} else {
				v.array = new Float32Array([v.x, v.y, v.z]);
			}
			return v.array;
		};
		Matrix44.createIdentity = function () {
			return new Float32Array([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]);
		};
		Matrix44.loadProjection = function (m, aspect, vdeg, near, far) {
			var h = near * Math.tan(vdeg * Math.PI / 180.0 * 0.5) * 2.0;
			var w = h * aspect;

			m[0] = 2.0 * near / w;
			m[1] = 0.0;
			m[2] = 0.0;
			m[3] = 0.0;

			m[4] = 0.0;
			m[5] = 2.0 * near / h;
			m[6] = 0.0;
			m[7] = 0.0;

			m[8] = 0.0;
			m[9] = 0.0;
			m[10] = -(far + near) / (far - near);
			m[11] = -1.0;

			m[12] = 0.0;
			m[13] = 0.0;
			m[14] = -2.0 * far * near / (far - near);
			m[15] = 0.0;
		};
		Matrix44.loadLookAt = function (m, vpos, vlook, vup) {
			var frontv = Vector3.create(vpos.x - vlook.x, vpos.y - vlook.y, vpos.z - vlook.z);
			Vector3.normalize(frontv);
			var sidev = Vector3.create(1.0, 0.0, 0.0);
			Vector3.cross(sidev, vup, frontv);
			Vector3.normalize(sidev);
			var topv = Vector3.create(1.0, 0.0, 0.0);
			Vector3.cross(topv, frontv, sidev);
			Vector3.normalize(topv);

			m[0] = sidev.x;
			m[1] = topv.x;
			m[2] = frontv.x;
			m[3] = 0.0;

			m[4] = sidev.y;
			m[5] = topv.y;
			m[6] = frontv.y;
			m[7] = 0.0;

			m[8] = sidev.z;
			m[9] = topv.z;
			m[10] = frontv.z;
			m[11] = 0.0;

			m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);
			m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);
			m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);
			m[15] = 1.0;
		};

		//
		var timeInfo = {
			'start': 0,
			'prev': 0, // Date
			'delta': 0,
			'elapsed': 0 // Number(sec)
		};

		//
		var gl;
		var renderSpec = {
			'width': 0,
			'height': 0,
			'aspect': 1,
			'array': new Float32Array(3),
			'halfWidth': 0,
			'halfHeight': 0,
			'halfArray': new Float32Array(3)
			// and some render targets. see setViewport()
		};
		renderSpec.setSize = function (w, h) {
			renderSpec.width = w;
			renderSpec.height = h;
			renderSpec.aspect = renderSpec.width / renderSpec.height;
			renderSpec.array[0] = renderSpec.width;
			renderSpec.array[1] = renderSpec.height;
			renderSpec.array[2] = renderSpec.aspect;

			renderSpec.halfWidth = Math.floor(w / 2);
			renderSpec.halfHeight = Math.floor(h / 2);
			renderSpec.halfArray[0] = renderSpec.halfWidth;
			renderSpec.halfArray[1] = renderSpec.halfHeight;
			renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;
		};

		function deleteRenderTarget(rt) {
			gl.deleteFramebuffer(rt.frameBuffer);
			gl.deleteRenderbuffer(rt.renderBuffer);
			gl.deleteTexture(rt.texture);
		}

		function createRenderTarget(w, h) {
			var ret = {
				'width': w,
				'height': h,
				'sizeArray': new Float32Array([w, h, w / h]),
				'dtxArray': new Float32Array([1.0 / w, 1.0 / h])
			};
			ret.frameBuffer = gl.createFramebuffer();
			ret.renderBuffer = gl.createRenderbuffer();
			ret.texture = gl.createTexture();

			gl.bindTexture(gl.TEXTURE_2D, ret.texture);
			gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

			gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);
			gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ret.texture, 0);

			gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);
			gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);
			gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, ret.renderBuffer);

			gl.bindTexture(gl.TEXTURE_2D, null);
			gl.bindRenderbuffer(gl.RENDERBUFFER, null);
			gl.bindFramebuffer(gl.FRAMEBUFFER, null);

			return ret;
		}

		function compileShader(shtype, shsrc) {
			var retsh = gl.createShader(shtype);

			gl.shaderSource(retsh, shsrc);
			gl.compileShader(retsh);

			if (!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {
				var errlog = gl.getShaderInfoLog(retsh);
				gl.deleteShader(retsh);
				console.error(errlog);
				return null;
			}
			return retsh;
		}

		function createShader(vtxsrc, frgsrc, uniformlist, attrlist) {
			var vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);
			var fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);

			if (vsh == null || fsh == null) {
				return null;
			}

			var prog = gl.createProgram();
			gl.attachShader(prog, vsh);
			gl.attachShader(prog, fsh);

			gl.deleteShader(vsh);
			gl.deleteShader(fsh);

			gl.linkProgram(prog);
			if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {
				var errlog = gl.getProgramInfoLog(prog);
				console.error(errlog);
				return null;
			}

			if (uniformlist) {
				prog.uniforms = {};
				for (var i = 0; i < uniformlist.length; i++) {
					prog.uniforms[uniformlist[i]] = gl.getUniformLocation(prog, uniformlist[i]);
				}
			}

			if (attrlist) {
				prog.attributes = {};
				for (var i = 0; i < attrlist.length; i++) {
					var attr = attrlist[i];
					prog.attributes[attr] = gl.getAttribLocation(prog, attr);
				}
			}

			return prog;
		}

		function useShader(prog) {
			gl.useProgram(prog);
			for (var attr in prog.attributes) {
				gl.enableVertexAttribArray(prog.attributes[attr]);;
			}
		}

		function unuseShader(prog) {
			for (var attr in prog.attributes) {
				gl.disableVertexAttribArray(prog.attributes[attr]);;
			}
			gl.useProgram(null);
		}

		/////
		var projection = {
			'angle': 60,
			'nearfar': new Float32Array([0.1, 100.0]),
			'matrix': Matrix44.createIdentity()
		};
		var camera = {
			'position': Vector3.create(0, 0, 100),
			'lookat': Vector3.create(0, 0, 0),
			'up': Vector3.create(0, 1, 0),
			'dof': Vector3.create(10.0, 4.0, 8.0),
			'matrix': Matrix44.createIdentity()
		};

		var pointFlower = {};
		var meshFlower = {};
		var sceneStandBy = false;

		var BlossomParticle = function () {
			this.velocity = new Array(3);
			this.rotation = new Array(3);
			this.position = new Array(3);
			this.euler = new Array(3);
			this.size = 1.0;
			this.alpha = 1.0;
			this.zkey = 0.0;
		};

		BlossomParticle.prototype.setVelocity = function (vx, vy, vz) {
			this.velocity[0] = vx;
			this.velocity[1] = vy;
			this.velocity[2] = vz;
		};

		BlossomParticle.prototype.setRotation = function (rx, ry, rz) {
			this.rotation[0] = rx;
			this.rotation[1] = ry;
			this.rotation[2] = rz;
		};

		BlossomParticle.prototype.setPosition = function (nx, ny, nz) {
			this.position[0] = nx;
			this.position[1] = ny;
			this.position[2] = nz;
		};

		BlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {
			this.euler[0] = rx;
			this.euler[1] = ry;
			this.euler[2] = rz;
		};

		BlossomParticle.prototype.setSize = function (s) {
			this.size = s;
		};

		BlossomParticle.prototype.update = function (dt, et) {
			this.position[0] += this.velocity[0] * dt;
			this.position[1] += this.velocity[1] * dt;
			this.position[2] += this.velocity[2] * dt;

			this.euler[0] += this.rotation[0] * dt;
			this.euler[1] += this.rotation[1] * dt;
			this.euler[2] += this.rotation[2] * dt;
		};

		function createPointFlowers() {
			// get point sizes
			var prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);
			renderSpec.pointSize = {
				'min': prm[0],
				'max': prm[1]
			};

			var vtxsrc = document.getElementById("sakura_point_vsh").textContent;
			var frgsrc = document.getElementById("sakura_point_fsh").textContent;

			pointFlower.program = createShader(
				vtxsrc, frgsrc,
				['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],
				['aPosition', 'aEuler', 'aMisc']
			);

			useShader(pointFlower.program);
			pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);
			pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);

			// paramerters: velocity[3], rotate[3]
			pointFlower.numFlowers = 1600;
			pointFlower.particles = new Array(pointFlower.numFlowers);
			// vertex attributes {position[3], euler_xyz[3], size[1]}
			pointFlower.dataArray = new Float32Array(pointFlower.numFlowers * (3 + 3 + 2));
			pointFlower.positionArrayOffset = 0;
			pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;
			pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;

			pointFlower.buffer = gl.createBuffer();
			gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);
			gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);
			gl.bindBuffer(gl.ARRAY_BUFFER, null);

			unuseShader(pointFlower.program);

			for (var i = 0; i < pointFlower.numFlowers; i++) {
				pointFlower.particles[i] = new BlossomParticle();
			}
		}

		function initPointFlowers() {
			//area
			pointFlower.area = Vector3.create(20.0, 20.0, 20.0);
			pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;

			pointFlower.fader.x = 10.0; //env fade start
			pointFlower.fader.y = pointFlower.area.z; //env fade half
			pointFlower.fader.z = 0.1; //near fade start

			//particles
			var PI2 = Math.PI * 2.0;
			var tmpv3 = Vector3.create(0, 0, 0);
			var tmpv = 0;
			var symmetryrand = function () {
				return (Math.random() * 2.0 - 1.0);
			};
			for (var i = 0; i < pointFlower.numFlowers; i++) {
				var tmpprtcl = pointFlower.particles[i];

				//velocity
				tmpv3.x = symmetryrand() * 0.3 + 0.8;
				tmpv3.y = symmetryrand() * 0.2 - 1.0;
				tmpv3.z = symmetryrand() * 0.3 + 0.5;
				Vector3.normalize(tmpv3);
				tmpv = 2.0 + Math.random() * 1.0;
				tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);

				//rotation
				tmpprtcl.setRotation(
					symmetryrand() * PI2 * 0.5,
					symmetryrand() * PI2 * 0.5,
					symmetryrand() * PI2 * 0.5
				);

				//position
				tmpprtcl.setPosition(
					symmetryrand() * pointFlower.area.x,
					symmetryrand() * pointFlower.area.y,
					symmetryrand() * pointFlower.area.z
				);

				//euler
				tmpprtcl.setEulerAngles(
					Math.random() * Math.PI * 2.0,
					Math.random() * Math.PI * 2.0,
					Math.random() * Math.PI * 2.0
				);

				//size
				tmpprtcl.setSize(0.9 + Math.random() * 0.1);
			}
		}

		function renderPointFlowers() {
			//update
			var PI2 = Math.PI * 2.0;
			var limit = [pointFlower.area.x, pointFlower.area.y, pointFlower.area.z];
			var repeatPos = function (prt, cmp, limit) {
				if (Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {
					//out of area
					if (prt.position[cmp] > 0) {
						prt.position[cmp] -= limit * 2.0;
					} else {
						prt.position[cmp] += limit * 2.0;
					}
				}
			};
			var repeatEuler = function (prt, cmp) {
				prt.euler[cmp] = prt.euler[cmp] % PI2;
				if (prt.euler[cmp] < 0.0) {
					prt.euler[cmp] += PI2;
				}
			};

			for (var i = 0; i < pointFlower.numFlowers; i++) {
				var prtcl = pointFlower.particles[i];
				prtcl.update(timeInfo.delta, timeInfo.elapsed);
				repeatPos(prtcl, 0, pointFlower.area.x);
				repeatPos(prtcl, 1, pointFlower.area.y);
				repeatPos(prtcl, 2, pointFlower.area.z);
				repeatEuler(prtcl, 0);
				repeatEuler(prtcl, 1);
				repeatEuler(prtcl, 2);

				prtcl.alpha = 1.0; //(pointFlower.area.z - prtcl.position[2]) * 0.5;

				prtcl.zkey = (camera.matrix[2] * prtcl.position[0] +
					camera.matrix[6] * prtcl.position[1] +
					camera.matrix[10] * prtcl.position[2] +
					camera.matrix[14]);
			}

			// sort
			pointFlower.particles.sort(function (p0, p1) {
				return p0.zkey - p1.zkey;
			});

			// update data
			var ipos = pointFlower.positionArrayOffset;
			var ieuler = pointFlower.eulerArrayOffset;
			var imisc = pointFlower.miscArrayOffset;
			for (var i = 0; i < pointFlower.numFlowers; i++) {
				var prtcl = pointFlower.particles[i];
				pointFlower.dataArray[ipos] = prtcl.position[0];
				pointFlower.dataArray[ipos + 1] = prtcl.position[1];
				pointFlower.dataArray[ipos + 2] = prtcl.position[2];
				ipos += 3;
				pointFlower.dataArray[ieuler] = prtcl.euler[0];
				pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];
				pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];
				ieuler += 3;
				pointFlower.dataArray[imisc] = prtcl.size;
				pointFlower.dataArray[imisc + 1] = prtcl.alpha;
				imisc += 2;
			}

			//draw
			gl.enable(gl.BLEND);
			//gl.disable(gl.DEPTH_TEST);
			gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);

			var prog = pointFlower.program;
			useShader(prog);

			gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);
			gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);
			gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);
			gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));
			gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));

			gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);
			gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);

			gl.vertexAttribPointer(prog.attributes.aPosition, 3, gl.FLOAT, false, 0, pointFlower.positionArrayOffset *
				Float32Array.BYTES_PER_ELEMENT);
			gl.vertexAttribPointer(prog.attributes.aEuler, 3, gl.FLOAT, false, 0, pointFlower.eulerArrayOffset * Float32Array
				.BYTES_PER_ELEMENT);
			gl.vertexAttribPointer(prog.attributes.aMisc, 2, gl.FLOAT, false, 0, pointFlower.miscArrayOffset * Float32Array
				.BYTES_PER_ELEMENT);

			// doubler
			for (var i = 1; i < 2; i++) {
				var zpos = i * -2.0;
				pointFlower.offset[0] = pointFlower.area.x * -1.0;
				pointFlower.offset[1] = pointFlower.area.y * -1.0;
				pointFlower.offset[2] = pointFlower.area.z * zpos;
				gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
				gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

				pointFlower.offset[0] = pointFlower.area.x * -1.0;
				pointFlower.offset[1] = pointFlower.area.y * 1.0;
				pointFlower.offset[2] = pointFlower.area.z * zpos;
				gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
				gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

				pointFlower.offset[0] = pointFlower.area.x * 1.0;
				pointFlower.offset[1] = pointFlower.area.y * -1.0;
				pointFlower.offset[2] = pointFlower.area.z * zpos;
				gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
				gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

				pointFlower.offset[0] = pointFlower.area.x * 1.0;
				pointFlower.offset[1] = pointFlower.area.y * 1.0;
				pointFlower.offset[2] = pointFlower.area.z * zpos;
				gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
				gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);
			}

			//main
			pointFlower.offset[0] = 0.0;
			pointFlower.offset[1] = 0.0;
			pointFlower.offset[2] = 0.0;
			gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);
			gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);

			gl.bindBuffer(gl.ARRAY_BUFFER, null);
			unuseShader(prog);

			gl.enable(gl.DEPTH_TEST);
			gl.disable(gl.BLEND);
		}

		// effects
		//common util
		function createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {
			var ret = {};
			var unifs = ['uResolution', 'uSrc', 'uDelta'];
			if (exunifs) {
				unifs = unifs.concat(exunifs);
			}
			var attrs = ['aPosition'];
			if (exattrs) {
				attrs = attrs.concat(exattrs);
			}

			ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);
			useShader(ret.program);

			ret.dataArray = new Float32Array([
				-1.0, -1.0,
				1.0, -1.0,
				-1.0, 1.0,
				1.0, 1.0
			]);
			ret.buffer = gl.createBuffer();
			gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);
			gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);

			gl.bindBuffer(gl.ARRAY_BUFFER, null);
			unuseShader(ret.program);

			return ret;
		}

		// basic usage
		// useEffect(prog, srctex({'texture':texid, 'dtxArray':(f32)[dtx, dty]})); //basic initialize
		// gl.uniform**(...); //additional uniforms
		// drawEffect()
		// unuseEffect(prog)
		// TEXTURE0 makes src
		function useEffect(fxobj, srctex) {
			var prog = fxobj.program;
			useShader(prog);
			gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);

			if (srctex != null) {
				gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);
				gl.uniform1i(prog.uniforms.uSrc, 0);

				gl.activeTexture(gl.TEXTURE0);
				gl.bindTexture(gl.TEXTURE_2D, srctex.texture);
			}
		}

		function drawEffect(fxobj) {
			gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);
			gl.vertexAttribPointer(fxobj.program.attributes.aPosition, 2, gl.FLOAT, false, 0, 0);
			gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
		}

		function unuseEffect(fxobj) {
			unuseShader(fxobj.program);
		}

		var effectLib = {};

		function createEffectLib() {

			var vtxsrc, frgsrc;
			//common
			var cmnvtxsrc = document.getElementById("fx_common_vsh").textContent;

			//background
			frgsrc = document.getElementById("bg_fsh").textContent;
			effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);

			// make brightpixels buffer
			frgsrc = document.getElementById("fx_brightbuf_fsh").textContent;
			effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);

			// direction blur
			frgsrc = document.getElementById("fx_dirblur_r4_fsh").textContent;
			effectLib.dirBlur = createEffectProgram(cmnvtxsrc, frgsrc, ['uBlurDir'], null);

			//final composite
			vtxsrc = document.getElementById("pp_final_vsh").textContent;
			frgsrc = document.getElementById("pp_final_fsh").textContent;
			effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);
		}

		// background
		function createBackground() {
			//console.log("create background");
		}

		function initBackground() {
			//console.log("init background");
		}

		function renderBackground() {
			gl.disable(gl.DEPTH_TEST);

			useEffect(effectLib.sceneBg, null);
			gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes, timeInfo.elapsed, timeInfo.delta);
			drawEffect(effectLib.sceneBg);
			unuseEffect(effectLib.sceneBg);

			gl.enable(gl.DEPTH_TEST);
		}

		// post process
		var postProcess = {};

		function createPostProcess() {
			//console.log("create post process");
		}

		function initPostProcess() {
			//console.log("init post process");
		}

		function renderPostProcess() {
			gl.enable(gl.TEXTURE_2D);
			gl.disable(gl.DEPTH_TEST);
			var bindRT = function (rt, isclear) {
				gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);
				gl.viewport(0, 0, rt.width, rt.height);
				if (isclear) {
					gl.clearColor(0, 0, 0, 0);
					gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
				}
			};

			//make bright buff
			bindRT(renderSpec.wHalfRT0, true);
			useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);
			drawEffect(effectLib.mkBrightBuf);
			unuseEffect(effectLib.mkBrightBuf);

			// make bloom
			for (var i = 0; i < 2; i++) {
				var p = 1.5 + 1 * i;
				var s = 2.0 + 1 * i;
				bindRT(renderSpec.wHalfRT1, true);
				useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);
				gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, p, 0.0, s, 0.0);
				drawEffect(effectLib.dirBlur);
				unuseEffect(effectLib.dirBlur);

				bindRT(renderSpec.wHalfRT0, true);
				useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);
				gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir, 0.0, p, 0.0, s);
				drawEffect(effectLib.dirBlur);
				unuseEffect(effectLib.dirBlur);
			}

			//display
			gl.bindFramebuffer(gl.FRAMEBUFFER, null);
			gl.viewport(0, 0, renderSpec.width, renderSpec.height);
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

			useEffect(effectLib.finalComp, renderSpec.mainRT);
			gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);
			gl.activeTexture(gl.TEXTURE1);
			gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);
			drawEffect(effectLib.finalComp);
			unuseEffect(effectLib.finalComp);

			gl.enable(gl.DEPTH_TEST);
		}

		/////
		var SceneEnv = {};

		function createScene() {
			createEffectLib();
			createBackground();
			createPointFlowers();
			createPostProcess();
			sceneStandBy = true;
		}

		function initScene() {
			initBackground();
			initPointFlowers();
			initPostProcess();

			//camera.position.z = 17.320508;
			camera.position.z = pointFlower.area.z + projection.nearfar[0];
			projection.angle = Math.atan2(pointFlower.area.y, camera.position.z + pointFlower.area.z) * 180.0 / Math.PI * 2.0;
			Matrix44.loadProjection(projection.matrix, renderSpec.aspect, projection.angle, projection.nearfar[0], projection
				.nearfar[1]);
		}

		function renderScene() {
			//draw
			Matrix44.loadLookAt(camera.matrix, camera.position, camera.lookat, camera.up);

			gl.enable(gl.DEPTH_TEST);

			//gl.bindFramebuffer(gl.FRAMEBUFFER, null);
			gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);
			gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);
			gl.clearColor(0.005, 0, 0.05, 0);
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

			renderBackground();
			renderPointFlowers();
			renderPostProcess();
		}

		/////
		function onResize(e) {
			makeCanvasFullScreen(document.getElementById("sakura"));
			setViewports();
			if (sceneStandBy) {
				initScene();
			}
		}

		function setViewports() {
			renderSpec.setSize(gl.canvas.width, gl.canvas.height);

			gl.clearColor(0.2, 0.2, 0.5, 1.0);
			gl.viewport(0, 0, renderSpec.width, renderSpec.height);

			var rtfunc = function (rtname, rtw, rth) {
				var rt = renderSpec[rtname];
				if (rt) deleteRenderTarget(rt);
				renderSpec[rtname] = createRenderTarget(rtw, rth);
			};
			rtfunc('mainRT', renderSpec.width, renderSpec.height);
			rtfunc('wFullRT0', renderSpec.width, renderSpec.height);
			rtfunc('wFullRT1', renderSpec.width, renderSpec.height);
			rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);
			rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);
		}

		function render() {
			renderScene();
		}

		var animating = true;

		function toggleAnimation(elm) {
			animating ^= true;
			if (animating) animate();
			if (elm) {
				elm.innerHTML = animating ? "Stop" : "Start";
			}
		}

		function stepAnimation() {
			if (!animating) animate();
		}

		function animate() {
			var curdate = new Date();
			timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;
			timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;
			timeInfo.prev = curdate;

			if (animating) requestAnimationFrame(animate);
			render();
		}

		function makeCanvasFullScreen(canvas) {
			var b = document.body;
			var d = document.documentElement;
			fullw = Math.max(b.clientWidth, b.scrollWidth, d.scrollWidth, d.clientWidth);
			fullh = Math.max(b.clientHeight, b.scrollHeight, d.scrollHeight, d.clientHeight);
			canvas.width = fullw;
			canvas.height = fullh;
		}

		window.addEventListener('load', function (e) {
			var canvas = document.getElementById("sakura");
			try {
				makeCanvasFullScreen(canvas);
				gl = canvas.getContext('experimental-webgl');
			} catch (e) {
				alert("WebGL not supported." + e);
				console.error(e);
				return;
			}

			window.addEventListener('resize', onResize);

			setViewports();
			createScene();
			initScene();

			timeInfo.start = new Date();
			timeInfo.prev = timeInfo.start;
			animate();
		});

		//set window.requestAnimationFrame
		(function (w, r) {
			w['r' + r] = w['r' + r] || w['webkitR' + r] || w['mozR' + r] || w['msR' + r] || w['oR' + r] || function (c) {
				w.setTimeout(c, 1000 / 60);
			};
		})(window, 'equestAnimationFrame');
	</script>
	<audio autoplay="autoplay" loop="loop" preload="auto"
		src="http://music.163.com/song/media/outer/url?id=1837557715.mp3">
	</audio>

</body>

</html>